<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DCVTC66 ‚Äî Chauffeur VTC √† Perpignan</title>
  <meta name="description" content="DCVTC66, chauffeur VTC √† Perpignan, propose des trajets fiables, confortables et ponctuels dans tout le d√©partement 66 et au-del√†. R√©servation simple et rapide." />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/png" href="LOGO DCVTC66.png">

  <!-- Styles ajout√©s -->
  <style>

    /* --- Boutons du HERO compact + toujours c√¥te √† c√¥te --- */
    .hero-actions {
      display: flex;
      flex-wrap: nowrap;
      gap: 0.55rem;
      margin-top: 1.25rem;
      justify-content: center;
    }

    .hero-actions a.btn-primary {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.45rem 0.9rem;
      font-size: 0.8rem;
      flex: 0 0 auto;
      white-space: nowrap;
      text-align: center;
      border-radius: 50px;
    }

    @media (max-width: 640px) {
      .hero-actions {
        flex-wrap: nowrap;
        flex-direction: row;
        justify-content: center;
      }
      .hero-actions a.btn-primary {
        width: auto;
      }
    }

    /* Bouton d'estimation */
    .btn-estimate {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.5rem 1.1rem;
      border-radius: 999px;
      font-weight: 600;
      font-size: 0.8rem;
      text-transform: uppercase;
      background: linear-gradient(135deg, #111827, #1f2933);
      color: #ffffff;
      border: none;
      cursor: pointer;
      box-shadow: 0 6px 18px rgba(15, 23, 42, 0.35);
      transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
      white-space: nowrap;
    }

    .btn-estimate:hover {
      transform: translateY(-1px) scale(1.01);
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.45);
      background: linear-gradient(135deg, #0b1120, #111827);
    }

    .btn-estimate:active {
      transform: translateY(0) scale(0.99);
      box-shadow: 0 4px 14px rgba(15, 23, 42, 0.35);
    }

    /* Conteneur des deux boutons sous le formulaire */
    .form-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .form-actions button {
      flex: 1 1 180px;
    }

    /* Carte flottante d'estimation ‚Äì EN HAUT de la page */
    #tarif-flottant {
      position: fixed;
      top: 24px;
      right: 24px;
      z-index: 9999;
      display: none;
      align-items: center;
      gap: 0.75rem;
      padding: 0.9rem 1.3rem;
      border-radius: 999px;
      background: linear-gradient(135deg, #16a34a, #22c55e);
      color: #022c22;
      box-shadow: 0 16px 40px rgba(22, 163, 74, 0.7);
      font-size: 0.95rem;
      font-weight: 600;
      max-width: 90vw;
      border: 1px solid rgba(6, 95, 70, 0.75);
      animation: pulseTarif 1.6s ease-in-out infinite;
    }

    @keyframes pulseTarif {
      0% { transform: scale(1); }
      50% { transform: scale(1.06); }
      100% { transform: scale(1); }
    }

    /* Mise sur la m√™me ligne des 3 boutons dans le hero */
    .hero-actions a {
      flex: 0 0 auto;
    }

    /* Carte */
    .map-reservation-wrapper {
      margin-top: 1.5rem;
    }

  </style>
</head>

<body>

  <!-- NAV TOUT EN HAUT -->
  <nav class="nav">
    <div class="container nav-inner">
      <ul>
        <li><a href="#services">Services</a></li>
        <li><a href="#reservation">R√©servation & estimation</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </div>
  </nav>

  <!-- HERO -->
  <header class="header">
    <div class="container header-inner">
      <div class="branding">

        <img src="LOGO DCVTC66.png" alt="Logo DCVTC66" class="logo">
        <h1 class="site-title">DCVTC66</h1>
        <p class="site-subtitle">Votre chauffeur VTC priv√© √† Perpignan et dans tout le 66</p>

        <!-- BOUTONS COMPACTS + C√îTE √Ä C√îT√â -->
        <div class="hero-actions">
          <a href="tel:0663463716" class="btn-primary">üìû Appeler le chauffeur</a>
          <a href="https://wa.me/33663463716" target="_blank" class="btn-primary">üí¨ WhatsApp</a>
          <a href="#reservation" class="btn-primary">üìù R√©server un trajet</a>
        </div>

        <div class="hero-badges">
          <span>‚úî Service 7j/7</span>
          <span>‚úî Chauffeur professionnel et ponctuel</span>
          <span>‚úî R√©servation simple et rapide</span>
        </div>

      </div>
    </div>
  </header>

  <!-- SECTION R√âSERVATION -->
  <section id="reservation" class="section section-alt">
    <div class="container">
      <h2 class="section-title">R√©server un trajet</h2>
      <p class="section-intro">Remplissez ce formulaire :</p>

      <form id="reservation-form" class="form">
        <label>Nom <input type="text" name="Nom" required></label>
        <label>T√©l√©phone <input type="tel" name="T√©l√©phone" required></label>
        <label>Point de d√©part <input type="text" name="D√©part" required></label>
        <label>Destination <input type="text" name="Arrivee" required></label>
        <label>Date et heure <input type="datetime-local" name="DateHeure" required></label>
        <label>Commentaires (optionnel)
          <textarea name="Message" rows="4"></textarea>
        </label>

        <div class="form-actions">
          <button type="button" id="btn-tarif" class="btn-estimate">
            ‚ú® Estimer le tarif
          </button>

          <button type="submit" class="btn-primary btn-full">
            Envoyer ma demande par SMS
          </button>
        </div>

        <div id="erreur-tarif" style="display:none;"></div>
        <div id="resultat-tarif" style="display:none;"></div>

        <div class="map-reservation-wrapper">
          <h3>Carte du trajet estim√©</h3>
          <div class="map-wrapper" style="position:relative;width:100%;height:320px;border-radius:12px;overflow:hidden;">
            <div id="map" style="width:100%;height:100%;"></div>
            <div id="tarif-overlay" style="
              display:none;position:absolute;top:10px;left:10px;background:#fff;
              border-radius:10px;padding:10px;box-shadow:0 4px 16px rgba(0,0,0,0.15);
            "></div>
          </div>
        </div>

      </form>
    </div>
  </section>

  <!-- SERVICES -->
  <section id="services" class="section">
    <div class="container">
      <h2 class="section-title">Nos services</h2>

      <div class="grid">
        <article class="card"><h3>Transferts a√©roports</h3><p>Perpignan, Toulouse, Barcelone...</p></article>
        <article class="card"><h3>Transferts gares</h3><p>Gare de Perpignan, Narbonne...</p></article>
        <article class="card"><h3>D√©placements professionnels</h3><p>RDV, s√©minaires...</p></article>
        <article class="card"><h3>Mise √† disposition</h3><p>√âv√©nements, soir√©es, mariages...</p></article>
      </div>

    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="section">
    <div class="container">
      <h2 class="section-title">Contact</h2>
      <p>üìû T√©l√©phone : <a href="tel:0663463716"><strong>06 63 46 37 16</strong></a></p>
      <p>üí¨ WhatsApp : <a href="https://wa.me/33663463716" target="_blank"><strong>Discuter sur WhatsApp</strong></a></p>
      <p>üìß Email : <strong>contact@dcvtc66.fr</strong></p>
      <p>üìç Bas√© √† Perpignan</p>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      ¬© <span id="year"></span> DCVTC66 ‚Äî Chauffeur VTC √† Perpignan
    </div>
  </footer>

  <!-- BOUTONS FLOTTANTS -->
  <a href="tel:0663463716" class="fab fab-call">üìû</a>
  <a href="https://wa.me/33663463716" target="_blank" class="fab fab-whatsapp">üí¨</a>

  <!-- TARIF FLOTTANT -->
  <div id="tarif-flottant">
    <span class="icon">üí∞</span>
    <span id="tarif-flottant-texte">Estimation‚Ä¶</span>
  </div>

  <!-- JS -->
  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    let derniereEstimation = null;

    const form = document.getElementById('reservation-form');
    form.addEventListener('submit', function (e) {
      e.preventDefault();

      const nom = form.Nom.value;
      const tel = form["T√©l√©phone"].value;
      const depart = form["D√©part"].value;
      const arrivee = form["Arrivee"].value;
      const dateHeure = form["DateHeure"].value;
      const messageClient = form["Message"].value;

      let sms = "Nouvelle demande DCVTC66 :\n\n";
      sms += "Nom : " + nom + "\n";
      sms += "T√©l√©phone : " + tel + "\n";
      sms += "D√©part : " + depart + "\n";
      sms += "Destination : " + arrivee + "\n";
      sms += "Date & heure : " + dateHeure + "\n";
      if (messageClient.trim() !== "") sms += "Commentaires : " + messageClient + "\n";

      if (derniereEstimation) {
        sms += "\n--- Estimation ---\n";
        sms += "Distance : " + derniereEstimation.distanceKm + " km\n";
        sms += "Dur√©e : " + derniereEstimation.dureeTexte + "\n";
        sms += "Tarif : " + derniereEstimation.tarif.toFixed(2) + " ‚Ç¨\n";
      }

      const numero = "0663463716";
      const url = "sms:" + numero + "?&body=" + encodeURIComponent(sms);
      window.location.href = url;
    });
  </script>

  <!-- GOOGLE MAPS + ESTIMATION -->
  <script>
    const BASE_KM = 7;
    const BASE_TARIF = 20;
    const SUPP_PAR_KM = 1.60;

    let map, distanceService, directionsService, directionsRenderer;

    function initMap() {
      const mapElement = document.getElementById("map");

      map = new google.maps.Map(mapElement, {
        center: { lat: 42.6986, lng: 2.8956 },
        zoom: 11,
      });

      distanceService = new google.maps.DistanceMatrixService();
      directionsService = new google.maps.DirectionsService();
      directionsRenderer = new google.maps.DirectionsRenderer({ map: map });

      new google.maps.places.Autocomplete(document.querySelector('input[name="D√©part"]'), {
        types: ["geocode"], componentRestrictions: { country: "fr" }
      });

      new google.maps.places.Autocomplete(document.querySelector('input[name="Arrivee"]'), {
        types: ["geocode"], componentRestrictions: { country: "fr" }
      });

      document.getElementById("btn-tarif").addEventListener("click", calculerTarif);
    }

    function calculerTarif() {
      const resDiv = document.getElementById("resultat-tarif");
      const errDiv = document.getElementById("erreur-tarif");
      const overlay = document.getElementById("tarif-overlay");
      const flottant = document.getElementById("tarif-flottant");
      const flottantTexte = document.getElementById("tarif-flottant-texte");

      const depart = form["D√©part"].value.trim();
      const arrivee = form["Arrivee"].value.trim();

      errDiv.style.display = "none";
      resDiv.style.display = "none";
      overlay.style.display = "none";
      flottant.style.display = "none";

      if (!depart || !arrivee) {
        errDiv.textContent = "Veuillez renseigner le d√©part et la destination.";
        errDiv.style.display = "block";
        return;
      }

      resDiv.style.display = "block";
      resDiv.innerHTML = "Calcul en cours...";

      distanceService.getDistanceMatrix({
        origins: [depart],
        destinations: [arrivee],
        travelMode: google.maps.TravelMode.DRIVING,
        unitSystem: google.maps.UnitSystem.METRIC,
      }, (response, status) => {

        const element = response.rows[0].elements[0];
        const distanceKm = Math.round((element.distance.value / 1000) * 10) / 10;
        const dureeTexte = element.duration.text;

        let tarif = BASE_TARIF;
        if (distanceKm > BASE_KM)
          tarif += (distanceKm - BASE_KM) * SUPP_PAR_KM;

        tarif = Math.round(tarif * 100) / 100;

        derniereEstimation = { distanceKm, dureeTexte, tarif };

        resDiv.innerHTML =
          "Distance : <strong>" + distanceKm + " km</strong><br>" +
          "Dur√©e : <strong>" + dureeTexte + "</strong><br>" +
          "Tarif estim√© : <strong>" + tarif.toFixed(2) + " ‚Ç¨</strong>";

        overlay.innerHTML =
          "<strong>Trajet simul√©</strong><br>" +
          "Distance : " + distanceKm + " km<br>" +
          "Dur√©e : " + dureeTexte + "<br>" +
          "Tarif : " + tarif.toFixed(2) + " ‚Ç¨";
        overlay.style.display = "block";

        flottantTexte.textContent =
          "Estimation : " + tarif.toFixed(2) + " ‚Ç¨ ‚Ä¢ " + distanceKm + " km ‚Ä¢ " + dureeTexte;
        flottant.style.display = "flex";

        directionsService.route({
          origin: depart,
          destination: arrivee,
          travelMode: google.maps.TravelMode.DRIVING,
        }, (result, statusDir) => {
          if (statusDir === "OK") directionsRenderer.setDirections(result);
        });
      });
    }
  </script>

  <!-- GOOGLE MAPS API -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDW4LNM6rw5DKJ3KjMP1hEvk03k5pCKg4c&callback=initMap&libraries=places" async defer></script>

</body>
</html>
